let XSL={probeError:function(e){if(!(e=e||{}).url)throw new Error("url is required");if(!e.callback)return XSL._probeErrorPromise(e);let r=document.createElement("script");r.src=e.url;var o=e.timeout||5e3;let n=e.timeoutShouldReturn||new Error("timeout"),t=setTimeout(function(){r.parentNode.removeChild(r),e.callback(n)},o);r.onload=function(){clearTimeout(t),r.parentNode&&r.parentNode.removeChild(r),e.callback(!0)},r.onerror=function(){clearTimeout(t),r.parentNode&&r.parentNode.removeChild(r),e.callback(!1)},document.head.appendChild(r)},_probeErrorPromise:function(o){return new Promise(function(r,e){XSL.probeError({url:o.url,timeout:o.timeout,timeoutShouldReturn:o.timeoutShouldReturn,callback:function(e){r(e)}})})},fetchTimed:function(o){if(!(o=o||{}).url)throw new Error("url is required");if(!o.callback)return XSL._fetchTimedPromise(o);var e={method:o.method||"GET",headers:o.headers||{},body:o.body||null,mode:o.mode||"no-cors",cache:o.cache||"default"};let n=performance.now();fetch(o.url,e).then(function(e){if(e.ok)return e.text();throw new Error("fetch failed")}).then(function(e){var r=performance.now();o.callback(r-n,e)}).catch(function(e){var r=performance.now();o.callback(r-n,e)})},_fetchTimedPromise:function(r){return new Promise(function(o,e){XSL.fetchTimed({url:r.url,method:r.method,headers:r.headers,body:r.body,mode:r.mode,cache:r.cache,callback:function(e,r){o({time:e,data:r})}})})},imageTimed:function(r){if(!(r=r||{}).url)throw new Error("url is required");if(!r.callback)return XSL._imageTimedPromise(r);let o=performance.now();var e=new Image;e.src=r.url,e.onload=function(){var e=performance.now();r.callback(e-o)},e.onerror=function(){var e=performance.now();r.callback(e-o)}},_imageTimedPromise:function(o){return new Promise(function(r,e){XSL.imageTimed({url:o.url,callback:function(e){r(e)}})})},frameTimed:function(r){if(!(r=r||{}).url)throw new Error("url is required");if(!r.callback)return XSL._frameTimedPromise(r);let o=performance.now(),n=document.createElement("iframe");n.onload=function(){var e=performance.now();n.parentNode&&n.parentNode.removeChild(n),r.callback(e-o)},n.onerror=function(){var e=performance.now();n.parentNode&&n.parentNode.removeChild(n),r.callback(e-o)},n.src=r.url,document.body.appendChild(n)},_frameTimedPromise:function(o){return new Promise(function(r,e){XSL.frameTimed({url:o.url,callback:function(e){r(e)}})})}};